<h2>Listing themes</h2>

<table class="themes">
<% @themes.each do |theme| %>
  <tr <%= "class='suspended'" unless theme.approved %>>
	<th>
		<%= theme.title %>
	</th>
	<td>
		<%= approve_button_for theme %>
		<%= link_to 'Edit', edit_admin_theme_path(theme), :class => 'button' %>
		<%= button_to 'Destroy', [:admin, theme], :method => :delete, :confirm => 'Are you sure?', :title => 'Permanently remove this theme' %>
	</td>
  </tr>
  <tr <%= "class='suspended'" unless theme.approved %>>
	<td colspan="2">
		<%= pluralize theme.proposals.length, 'proposal' %>
		<%= link_to 'New Proposal', new_admin_theme_proposal_path(theme), :class => 'button' %>
		<% if theme.proposals.any? %>
			<ul>
				<% theme.proposals.each do |proposal| %>
					<li <%= "class='suspended'" unless proposal.approved %>>
						<%= link_to proposal.title, [:admin, theme, proposal] %>
						(<%= proposal.impact %>)
						<%= link_to 'Edit', edit_admin_theme_proposal_path(theme, proposal), :class => 'button' %>
					</li>
				<% end %>
			</ul>
		<% end %>
	</td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Theme', new_admin_theme_path, :class => 'button' %>
